@model CompanyPageModel

@{
    ViewBag.Title = Html.LocalizationString("company_page_view_title");
}

<div class="col-lg-12">
    <h3>@ViewBag.Title</h3>
    <hr />

    <div class="col-lg-12">
        @foreach (var image in Model.Images)
        {
            var base64 = Convert.ToBase64String(image.ByteData);
            var imgSrc = String.Format("data:image/jpg;base64,{0}", base64);

            <img src="@imgSrc" class="col-lg-2" />
        }
    </div>

    <div class="col-lg-12">

        <!-- Nav tabs -->
        <ul class="nav nav-tabs">
            <li class="active"><a href="#current_opportunities" data-toggle="tab">@Html.LocalizationString("current_opportunities")</a></li>
            <li><a href="#past_opportunities" data-toggle="tab">@Html.LocalizationString("past_opportunities")</a></li>
            <li><a href="#about_us" data-toggle="tab">@Html.LocalizationString("about_us")</a></li>
            <li><a href="#contact" data-toggle="tab">@Html.LocalizationString("contact")</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
            <div class="tab-pane fade in active" id="current_opportunities">
                
                <table  class="table table-bordered table-hover">
                    <thead id="tHead">
                        <tr id="trQuestion"> 
                            <td colspan="4">@Model.Question.QuestionText</td> 
                        </tr>
                    </thead> 
                    <tbody id="tBody">
                        <tr>
                            <td>
                                <input type="radio" id="rbAnswer1" name="rbAnswer">@Model.Question.Answer1</input>
                            </td>
                            <td>
                                <input type="radio" id="rbAnswer2" name="rbAnswer">@Model.Question.Answer2</input>
                            </td>
                            <td>
                                <input type="radio" id="rbAnswer3" name="rbAnswer">@Model.Question.Answer3</input>
                            </td>
                            <td>
                                <input type="radio" id="rbAnswer4" name="rbAnswer">@Model.Question.Answer4</input>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="4">
                                <input type="button" id="btnNextQuestion" class="btn btn-sm btn-info pull-right" value="@Html.LocalizationString("btn_next_question")" data-id="@Model.Question.Id" />
                            </td>
                        </tr>
                    </tfoot>
                </table>

                
            </div>
            <div class="tab-pane fade" id="past_opportunities"> Buraya Geçmiş fırsatlar (tarih aralıklarıyla) listelenecek.</div>
            <div class="tab-pane fade" id="about_us">Hakkımızda sayfası</div>
            <div class="tab-pane fade" id="contact">
                <h2>
                    <span class="col-lg-4">@Model.Company.Name</span>
                    <span class="col-lg-4">@Model.Company.Address</span>
                </h2>
            </div>
        </div>

    </div>

</div>
@Html.AntiForgeryToken()

@section script
{
    <script>
        $(function () {
            alert("test"); 

            $("input#btnNextQuestion").click(function () {
                var questionId = $(this).data("id");

                alert("test2");


                $.ajax({
                    url: "/company/isanswercorrect",
                    type: "POST",
                    data: "questionId=" + questionId + "&answer='asdqwe'" + "&__RequestVerificationToken=" + $('input[name="__RequestVerificationToken"]').val(),
                }).done(function (r) {
                    if (r) {
                        alert("test3");

                       // $("#trQuestion").delete();

                        var row = $("<tr />"); 

                        var td = $("<td />");
                        td.html(r.Result.QuestionText);

                        row.append(td); 
                          
                        $('#tHead').append(row);


                    } else {
                        alert("test4");
                    }
                });
            });



        });
    </script>
}